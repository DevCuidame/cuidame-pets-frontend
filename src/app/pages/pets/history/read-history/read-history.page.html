<div class="history" *ngIf="finishedLoading; else loading">
  <div *ngFor="let dis of disease; let i = index;">
    <div class="h-card" [ngStyle]="{'z-index': dis.hCardZIndex}">
      <div class="h-container">
        <div class="left-side">
          <label class="h-title">{{dis.name}}</label>
          <label class="h-type">({{dis.typediseasecondition}})</label>
          <label class="lighter">Estado:</label>
          <label class="lighter">{{dis.status}}</label>
        </div>
        <div class="right-side">
          <label class="lighter">Fecha Dx:</label>
          <label class="lighter" style="margin-bottom: 10px"
            >{{dis.diagnosticdate}}</label
          >
        </div>
      </div>
      <div class="plus-show" (click)="toggleDescription(dis)">
        <label>{{ selectedDisease === dis ? '- Menos' : '+ Más' }}</label>
      </div>
    </div>
    <div class="descrip-card" [ngClass]="{'expanded': selectedDisease === dis}" [ngStyle]="{'z-index': dis.descripCardZIndex}">
      <div class="disease-description">
        <p>{{dis.description}}</p>
      </div>
      <div class="pencil-container" >
      <button (click)="goToEdit(dis.id)" style="background-color: #fff;">
        <img src="/assets/pets/ico-pencil-edit.svg" alt="pencil" />
      </button>
    </div>
    </div>
  </div>

  <div *ngIf="finishedLoading_ else loading">
    <div *ngFor="let item of treatment; let i = index;">
      <div class="h-card" [ngStyle]="{'z-index': item.TCardZIndex}">
        <div class="h-container">
          <div class="left-side">
            <label class="h-title">{{item.name}}</label>
            <label class="h-type">({{item.typetreatment}})</label>
            <label class="lighter">Estado:</label>
            <label class="lighter">{{item.status}}</label>
          </div>
          <div class="right-side">
            <label class="lighter">Fecha inicio:</label>
            <label class="lighter" style="margin-bottom: 10px"
              >{{item.startdate}}</label
            >
            <label class="lighter">Fecha Final:</label>
            <label class="lighter">{{item.enddate}}</label>
          </div>
        </div>
        <div class="plus-show" (click)="toggleDescriptionT(item)">
          <label>{{ selectedTreatment === item ? '- Menos' : '+ Más' }}</label>
        </div>
      </div>
      <div class="descrip-card" [ngClass]="{'expanded': selectedTreatment === item}" [ngStyle]="{'z-index': item.descripCardZIndexT}">
        <div class="disease-description">
          <p>{{item.frequency}}</p>
        </div>
        <div class="pencil-container" >
        <button (click)="goToEditTreatment(item.id)" style="background-color: #fff;">
          <img src="/assets/pets/ico-pencil-edit.svg" alt="pencil" />
        </button>
      </div>
      </div>
    </div>
  </div>
  <div class="v-add" (click)="goToAdd()">
    <img src="/assets/pets/ico-vaccine-add.svg" alt="v-add" />
    <label>Agregar</label>
  </div>
</div>

<ng-template #loading>
  <div
    style="
      margin-top: 100%;
      display: flex;
      flex-direction: column;
      width: 100%;
      align-items: center;
    "
  >
    <ion-spinner name="crescent"></ion-spinner>
  </div>
</ng-template>